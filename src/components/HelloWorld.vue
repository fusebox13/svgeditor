<template>
  <div class="hello">
    <nav>
      <svg-uploader
        id="svg-uploader"
        @upload-success="uploadImageSuccess"
        @before-remove="beforeRemove"
        @edit-image="editImage"
        @data-change="dataChange"
        :data-images="images"
        drag-text="Feed me an SVG"
        browse-text="browse"
        primary-text="Locked and Loaded"
        mark-is-primary-text="Mark is primary"
        popup-text="Popup"
        drop-text="Drop"
        accept="image/svg"
        >
      </svg-uploader>
    </nav>
    <main>
      <section>
        <slider-picker id="slider-picker" v-model="colors" />
      </section>
      <section>
        <svg-image id="svg-image" :svg="svgPath" :color="colors.hex"></svg-image>
      </section>
    </main>
  </div>
</template>

<script>
export default {
  name: 'HelloWorld',
  inject: ['paper'],
  props: {
    msg: String
  },
  data() {
    return {
      fill: '#FFFFFF',
      stroke: '#000000',
      images: [],
      svgPath: '<svg ref="svg" id="svg" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="540" height="405"><g fill="#ff0000" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path class="bubble" d="M39.56395,149.66127c-0.43921,-41.36128 -0.43921,-41.36128 -19.49298,-50.57792c-19.05377,-9.21664 -19.05377,-9.21664 -19.05377,50.77731c0,59.99395 0,59.99395 19.49298,50.57792c19.49298,-9.41603 19.49298,-9.41603 19.05377,-50.77731z"/><path d="M23.27272,323.54714c-22.1818,-8.98883 -22.1818,-8.98883 -22.1818,35.12722c0,44.11604 0,44.11604 15.03279,44.11604c15.03279,0 15.03279,0 22.1818,-35.12722c7.14901,-35.12722 7.14901,-35.12722 -15.03279,-44.11604z"/><path d="M110.8005,2.16212c6.03556,-2.06693 6.03556,-2.06693 -2.90257,-2.06693c-8.93813,0 -8.93813,0 -6.03556,2.06693c2.90257,2.06693 2.90257,2.06693 8.93813,0z"/><path d="M64.60584,93.05046c23.91071,-10.34701 23.91071,-10.34701 30.63926,-48.33747c6.72855,-37.99046 0.92342,-42.12432 -45.86704,-42.12432c-46.79046,0 -46.79046,0 -46.79046,41.18775c0,41.18775 0,41.18775 19.05377,50.4044c19.05377,9.21664 19.05377,9.21664 42.96447,-1.13036z"/><path d="M75.75865,208.79499c31.95734,17.40603 31.95734,17.40603 47.58511,7.88413c15.62777,-9.5219 15.62777,-9.5219 22.38546,-51.96877c6.75769,-42.44687 6.75769,-42.44687 -24.11362,-59.59242c-30.87131,-17.14554 -30.87131,-17.14554 -54.78202,-6.79854c-23.91071,10.34701 -23.91071,10.34701 -23.4715,51.70829c0.43921,41.36128 0.43921,41.36128 32.39655,58.76731z"/><path d="M62.90145,322.34797c15.89086,-5.29125 15.89086,-5.29125 24.9343,-10.20981c9.04344,-4.91856 9.04344,-4.91856 13.37766,-42.78483c4.33422,-37.86627 4.33422,-37.86627 -27.62312,-55.2723c-31.95734,-17.40603 -31.95734,-17.40603 -51.45032,-7.99c-19.49298,9.41603 -19.49298,9.41603 -19.49298,56.49328c0,47.07725 0,47.07725 22.1818,56.06608c22.1818,8.98883 22.1818,8.98883 38.07266,3.69758z"/><path d="M126.21071,402.66951c28.54698,0 28.54698,0 32.33213,-27.48393c3.78515,-27.48393 3.78515,-27.48393 -27.20534,-45.33703c-30.99049,-17.85309 -30.99049,-17.85309 -40.03393,-12.93453c-9.04344,4.91856 -9.04344,4.91856 -1.34164,45.33703c7.7018,40.41847 7.7018,40.41847 36.24878,40.41847z"/><path d="M184.07399,104.9806c28.75098,-12.3409 28.75098,-12.3409 20.58529,-57.20294c-8.1657,-44.86204 -8.1657,-44.86204 -46.85817,-44.86204c-38.69248,0 -50.7636,4.13386 -57.49216,42.12432c-6.72855,37.99046 -6.72855,37.99046 24.14275,55.13601c30.87131,17.14554 30.87131,17.14554 59.62229,4.80465z"/><path d="M241.67634,209.56226c26.0708,-18.83656 26.0708,-18.83656 21.79658,-55.83837c-4.27422,-37.00181 -4.27422,-37.00181 -26.11994,-46.43198c-21.84572,-9.43016 -21.84572,-9.43016 -50.5967,2.91074c-28.75098,12.3409 -28.75098,12.3409 -35.50868,54.78777c-6.75769,42.44687 -6.75769,42.44687 28.80013,52.92763c35.55782,10.48076 35.55782,10.48076 61.62862,-8.3558z"/><path d="M194.2186,334.55585c29.85241,-9.13348 29.85241,-9.13348 24.52932,-54.7605c-5.32308,-45.62702 -5.32308,-45.62702 -40.8809,-56.10778c-35.55782,-10.48076 -35.55782,-10.48076 -51.18559,-0.95886c-15.62777,9.5219 -15.62777,9.5219 -19.96199,47.38816c-4.33422,37.86627 -4.33422,37.86627 26.65627,55.71936c30.99049,17.85309 30.99049,17.85309 60.8429,8.71961z"/><path d="M242.72755,337.08822c-16.25229,-7.19713 -16.25229,-7.19713 -46.10469,1.93635c-29.85241,9.13348 -29.85241,9.13348 -33.63755,36.61741c-3.78515,27.48393 -3.78515,27.48393 47.50577,27.48393c51.29092,0 51.29092,0 49.88984,-29.42029c-1.40108,-29.42029 -1.40108,-29.42029 -17.65336,-36.61741z"/><path d="M340.99459,6.77941c10.66271,-6.48094 10.66271,-6.48094 -9.10748,-6.48094c-19.77019,0 -19.77019,0 -10.66271,6.48094c9.10748,6.48094 9.10748,6.48094 19.77019,0z"/><path d="M240.31601,101.93145c21.84572,9.43016 21.84572,9.43016 49.89502,-6.97278c28.0493,-16.40294 28.0493,-16.40294 32.44018,-47.81126c4.39088,-31.40832 4.39088,-31.40832 -4.7166,-37.88926c-9.10748,-6.48094 -9.10748,-6.48094 -62.4516,-6.48094c-53.34412,0 -53.34412,0 -45.17843,44.86204c8.1657,44.86204 8.1657,44.86204 30.01142,54.2922z"/><path d="M299.98456,205.13597c26.18945,14.94607 26.18945,14.94607 57.71775,0.71248c31.5283,-14.23359 31.5283,-14.23359 29.23928,-50.6477c-2.28902,-36.41411 -2.28902,-36.41411 -33.94267,-54.11723c-31.65365,-17.70312 -31.65365,-17.70312 -59.70295,-1.30018c-28.0493,16.40294 -28.0493,16.40294 -23.77508,53.40475c4.27422,37.00181 4.27422,37.00181 30.46367,51.94788z"/><path d="M245.79849,332.14514c16.25229,7.19713 16.25229,7.19713 47.18175,-4.15113c30.92946,-11.34826 30.92946,-11.34826 30.68488,-56.71463c-0.24458,-45.36637 -0.24458,-45.36637 -26.43403,-60.31244c-26.18945,-14.94607 -26.18945,-14.94607 -52.26025,3.89049c-26.0708,18.83656 -26.0708,18.83656 -20.74771,64.46357c5.32308,45.62702 5.32308,45.62702 21.57537,52.82415z"/><path d="M325.18071,402.9353c57.74221,0 57.74221,0 57.77949,-27.36093c0.03727,-27.36093 0.03727,-27.36093 -28.21383,-40.76854c-28.2511,-13.40761 -28.2511,-13.40761 -59.18056,-2.05935c-30.92946,11.34826 -30.92946,11.34826 -29.52838,40.76854c1.40108,29.42029 1.40108,29.42029 59.14329,29.42029z"/><path d="M420.06107,95.53623c32.38226,-18.45554 32.38226,-18.45554 26.68168,-55.59238c-5.70059,-37.13684 -5.70059,-37.13684 -48.98232,-37.13684c-43.28173,0 -43.28173,0 -53.94444,6.48094c-10.66271,6.48094 -10.66271,6.48094 -15.0536,37.88926c-4.39088,31.40832 -4.39088,31.40832 27.26277,49.11144c31.65365,17.70312 31.65365,17.70312 64.03591,-0.75242z"/><path d="M420.80776,205.77433c25.6088,14.18383 25.6088,14.18383 46.54197,6.01724c20.93317,-8.1666 20.93317,-8.1666 29.4675,-55.49479c8.53434,-47.32819 8.53434,-47.32819 -16.44873,-60.88689c-24.98306,-13.5587 -24.98306,-13.5587 -57.36533,4.89684c-32.38226,18.45554 -32.38226,18.45554 -30.09324,54.86965c2.28902,36.41411 2.28902,36.41411 27.89782,50.59795z"/><path d="M357.77708,330.15828c28.2511,13.40761 28.2511,13.40761 50.72802,1.4821c22.47691,-11.92551 22.47691,-11.92551 28.64142,-58.82374c6.1645,-46.89823 6.1645,-46.89823 -19.4443,-61.08206c-25.6088,-14.18383 -25.6088,-14.18383 -57.1371,0.04975c-31.5283,14.23359 -31.5283,14.23359 -31.28372,59.59996c0.24458,45.36637 0.24458,45.36637 28.49568,58.77399z"/><path d="M467.84719,337.27433c-33.77719,-12.83357 -33.77719,-12.83357 -56.25411,-0.90806c-22.47691,11.92551 -22.47691,11.92551 -22.51419,39.28644c-0.03727,27.36093 -0.03727,27.36093 58.26945,27.36093c58.30672,0 58.30672,0 56.29138,-26.45288c-2.01534,-26.45288 -2.01534,-26.45288 -35.79253,-39.28644z"/><path d="M482.69602,90.45097c24.98306,13.5587 24.98306,13.5587 39.9823,8.76694c14.99923,-4.79175 14.99923,-4.79175 14.99923,-50.69554c0,-45.90379 0,-45.90379 -45.68289,-45.90379c-45.68289,0 -45.68289,0 -39.9823,37.13684c5.70059,37.13684 5.70059,37.13684 30.68365,50.69554z"/><path d="M538.84888,163.35206c0,-63.44308 0,-63.44308 -14.99923,-58.65133c-14.99923,4.79175 -14.99923,4.79175 -23.53357,52.11994c-8.53434,47.32819 -8.53434,47.32819 14.99923,58.65133c23.53357,11.32314 23.53357,11.32314 23.53357,-52.11994z"/><path d="M520.56079,335.77752c16.85405,-9.94742 16.85405,-9.94742 16.85405,-56.57526c0,-46.62783 0,-46.62783 -23.53357,-57.95097c-23.53357,-11.32314 -23.53357,-11.32314 -44.46674,-3.15654c-20.93317,8.1666 -20.93317,8.1666 -27.09767,55.06483c-6.1645,46.89823 -6.1645,46.89823 27.61269,59.7318c33.77719,12.83357 33.77719,12.83357 50.63124,2.88614z"/><path d="M524.30352,403.19709c14.83871,0 14.83871,0 14.83871,-36.4003c0,-36.4003 0,-36.4003 -16.85405,-26.45288c-16.85405,9.94742 -16.85405,9.94742 -14.83871,36.4003c2.01534,26.45288 2.01534,26.45288 16.85405,26.45288z"/><path d="M63.45045,327.40211c-15.89086,5.29125 -15.89086,5.29125 -23.03987,40.41847c-7.14901,35.12722 -7.14901,35.12722 23.59265,35.12722c30.74166,0 30.74166,0 23.03987,-40.41847c-7.7018,-40.41847 -7.7018,-40.41847 -23.59265,-35.12722z"/></g></svg>',
      colors: {}
    }
  },    
  methods: {
    setFillColor(colorSelection) {
      this.fill = colorSelection
    },
    setStrokeColor(colorSelection){
      this.stroke = colorSelection
    },
    uploadImageSuccess(formData, index, fileList) {
      this.svgPath = atob(fileList[index].path.split(',')[1])
    },
    beforeRemove (index, done, fileList) {
      this.svgPath = '';
    },
    editImage (formData, index, fileList) {
      console.log("Edit image");
      this.svgPath = atob(fileList[index].path.split(',')[1])
    },
    dataChange (data) {
      console.log(data)
    }

  }

}
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped lang="scss">
  nav {
    #svg-uploader {
      position: fixed;
      top: 0;
    } 
  }

  main {
    section {
      display: flex;
      justify-content: center;
      margin-bottom: 2em;
    }
  }
</style>
